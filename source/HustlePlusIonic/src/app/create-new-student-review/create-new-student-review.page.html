<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="back()">
        <ion-icon slot="start" name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>
      Review a Student
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-card>
    <ion-card-header>
      <ion-card-title>Review a Student</ion-card-title>
    </ion-card-header>
    <ion-card-content>

      <div *ngIf="infoMessage">
        {{infoMessage}}
      </div>

      <div *ngIf="errorMessage">
        {{errorMessage}}
      </div>

      <form #createStudentReviewForm="ngForm" (ngSubmit)="create(createStudentReviewForm)">

        <ion-grid>

          <ion-row>
            <ion-col>
              <ion-item>
                <ion-label>Projects</ion-label>      
                <ion-select [compareWith]="compareWith" placeholder="Select Project" id="project" name="project" #project="ngModel" [(ngModel)]="projectId" required="true">
                  <ion-select-option *ngFor="let project of projects" value="{{project.projectId}}">{{project.projectName}}</ion-select-option>
                </ion-select>
              </ion-item>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col>
              <ion-item>
                <ion-label>Students</ion-label>
                <ion-select [compareWith]="compareWith" placeholder="Select Student" id="student" name="student" #student="ngModel" [(ngModel)]="studentId" required="true">
                  <ion-select-option *ngFor="let student of students" value="{{student.userId}}">{{student.email}}</ion-select-option>
                </ion-select>
              </ion-item>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col>
              <ion-item>
                <ion-label>Rating</ion-label>
                <ion-icon name="star" *ngFor="let num of [1,2,3,4,5]"
                  (click)="rate(num)" [ngStyle]="{'color':getColor(num)}">
                </ion-icon>
              </ion-item>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col>
              <ion-label>Review Text</ion-label>
            </ion-col>
            <ion-col>
              <ion-input type="text" id="reviewText" name="reviewText" [(ngModel)]="newStudentReview.reviewText"
                required="true" #reviewText="ngModel"></ion-input>
            </ion-col>
            <ion-col>
              <div *ngIf="reviewText.invalid && (reviewText.dirty || reviewText.touched || submitted)"
                style="color: red;">
                <div *ngIf="reviewText.errors.required">
                  Review Text is required
                </div>
              </div>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col></ion-col>
            <ion-col>
              <ion-button (click)="clear()">
                Clear
              </ion-button>
              <ion-button type="submit" (click)="back()" ion-button block>
                Create
              </ion-button>
            </ion-col>
            <ion-col></ion-col>
          </ion-row>

        </ion-grid>

      </form>

    </ion-card-content>
  </ion-card>
</ion-content>

<ion-footer>
  <ion-title size="small">&copy; 2020 HustlePlus. All rights reserved.</ion-title>
</ion-footer>